@page
@model StudentEnrollmentSystem.Pages.AccountDetails.StudentDetailsModel
@{
    ViewData["Title"] = "General Information";
}
<link rel="stylesheet" href="~/css/AccountDetails.css">
<div class="container light-style flex-grow-1 container-p-y">
    <h4 class="font-weight-bold py-3 mb-4">Account Settings</h4>
    <div class="card overflow-hidden">
        <div class="row no-gutters row-bordered row-border-light">
            <div class="col-md-3 pt-0">
                <div class="list-group list-group-flush account-settings-links">
                    <a class="list-group-item list-group-item-action active" asp-page="/AccountDetails/GeneralInformation">General Information</a>
                    <a class="list-group-item list-group-item-action" asp-page="/AccountDetails/UpdateContactInformation">Update Contact Information</a>
                    <a class="list-group-item list-group-item-action" asp-page="/AccountDetails/UpdatePaymentDetails">Update Payment Details</a>
                    <a class="list-group-item list-group-item-action" asp-page="/AccountDetails/ChangePassword">Change Password</a>
                </div>
            </div>
            <div class="col-md-9">
                <div class="tab-content">
                    <div class="tab-pane fade active show" id="account-general">
                        <div class="card-body">
                            @if (TempData["ErrorMessage"] != null)
                            {
                                <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
                            }
                            <form method="post">
                                <div class="form-group mb-3">
                                    <label class="form-label mb-0">Student ID</label>
                                    <input type="text" class="form-control mb-1" asp-for="StudentDetails.StudentID" disabled>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group mb-3">
                                            <label class="form-label mb-0">First Name</label>
                                            <input type="text" class="form-control" asp-for="StudentDetails.FirstName" required>
                                            <span class="text-danger" asp-validation-for="StudentDetails.FirstName"></span>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="form-group mb-3">
                                            <label class="form-label mb-0">Last Name</label>
                                            <input type="text" class="form-control" asp-for="StudentDetails.LastName" required>
                                            <span class="text-danger" asp-validation-for="StudentDetails.LastName"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group mb-3">
                                            <label class="form-label mb-0">Institutional Email</label>
                                            <input type="email" class="form-control mb-1" asp-for="StudentDetails.InstitutionalEmail" disabled>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group mb-3">
                                            <label class="form-label mb-0">Personal Email</label>
                                            <input type="email" class="form-control mb-1" asp-for="StudentDetails.PersonalEmail" required>
                                            <span class="text-danger" asp-validation-for="StudentDetails.PersonalEmail"></span>
                                            @if (!string.IsNullOrEmpty(Model.UniqueEmailMessage))
                                            {
                                                <span class="text-danger">@Model.UniqueEmailMessage</span>
                                            }

                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group mb-3">
                                            <label class="form-label mb-0">Phone Number</label>
                                            <input type="text" class="form-control" asp-for="StudentDetails.PhoneNumber" id="phoneNumber" required>
                                            <span class="text-danger" asp-validation-for="StudentDetails.PhoneNumber"></span>
                                            @if (!string.IsNullOrEmpty(Model.UniquePhoneNumberMessage))
                                            {
                                                <span class="text-danger">@Model.UniquePhoneNumberMessage</span>
                                            }
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group mb-3">
                                            <label class="form-label mb-0">Date of Birth</label>
                                            <input type="date" class="form-control"
                                                   asp-for="StudentDetails.DateOfBirth"
                                                   max="@DateTime.Now.ToString("yyyy-MM-dd")"
                                                   value="@(Model.StudentDetails.DateOfBirth == DateTime.MinValue ? DateTime.Now.ToString("yyyy-MM-dd") : Model.StudentDetails.DateOfBirth.ToString("yyyy-MM-dd"))"
                                                   required>
                                            <span class="text-danger" asp-validation-for="StudentDetails.DateOfBirth"></span>

                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group mb-3">
                                            <label class="form-label mb-0">Program</label>
                                            <input type="text" class="form-control" asp-for="StudentDetails.Program" disabled>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="form-group mb-3">
                                            <label class="form-label mb-0">CGPA</label>
                                            @if (ViewData["IsFirstSemester"] != null && (bool)ViewData["IsFirstSemester"])
                                            {
                                                <input asp-for="StudentDetails.CGPA" class="form-control" disabled placeholder="Not applicable for first semester" />
                                                <span class="text-info">@ViewData["CGPAMessage"]</span>
                                            }
                                            else
                                            {
                                                <input type="number" step="0.01" min="0" max="4" class="form-control" asp-for="StudentDetails.CGPA">
                                            }
                                        </div>
                                    </div>
                                </div>

                                @if (!string.IsNullOrEmpty(Model.SuccessMessage))
                                {
                                    <div class="alert alert-success">@Model.SuccessMessage</div>
                                }
                                @if (!string.IsNullOrEmpty(Model.ErrorMessage))
                                {
                                    <div class="alert alert-danger">@Model.ErrorMessage</div>
                                }
                                <div class="d-flex justify-content-end mt-3">
                                    <button type="submit" class="btn btn-primary me-4">Save Changes</button>
                                    <a asp-page="/Home" class="btn btn-back btn-outline-success">Back to Home</a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    }

