@page
@model StudentEnrollmentSystem.Pages.VerifyTACModel
@{
    ViewData["Title"] = "Verify TAC";
}
<div class="container light-style flex-grow-1 container-p-y">
    <h4 class="font-weight-bold py-3 mb-4">Email Verification</h4>
    <div class="card">
        <div class="card-body">
            @if (!string.IsNullOrEmpty(Model.ErrorMessage))
            {
                <div class="alert alert-danger">@Model.ErrorMessage</div>
            }
            @if (!string.IsNullOrEmpty(Model.SuccessMessage))
            {
                <div class="alert alert-success">@Model.SuccessMessage</div>
            }
            @if (Model.CodeSent)
            {
                if (!string.IsNullOrEmpty(Model.ErrorMessage))
                {
                }
                else
                {
                <p>A verification code has been sent to your email: <strong>@Model.Email</strong></p>
                <form method="post" asp-page-handler="Verify">
                    <div class="form-group">
                        <label>Enter 6-digit Verification Code</label>
                        <input type="text" asp-for="EnteredTAC" class="form-control" required maxlength="6" />
                    </div>
                    <div class="text-right mt-3">
                        <button type="submit" class="btn btn-primary">Verify Code</button>
                        <a asp-page-handler="Cancel" class="btn btn-outline-danger">Cancel</a>
                    </div>
                </form>
                }
            }
            else
            {
                <p>To verify your identity, we need to send a verification code to your email.</p>
                <form method="post" asp-page-handler="SendTAC">
                    <div class="form-group">
                        <label>Enter Your Email Address</label>
                        <input type="email" asp-for="Email" class="form-control" required />
                        <span asp-validation-for="Email" class="text-danger"></span>
                    </div>
                    <div class="text-right mt-3">
                        <button type="submit" class="btn btn-primary">Send Verification Code</button>
                        <a asp-page-handler="Cancel" class="btn btn-outline-danger">Cancel</a>

                    </div>
                </form>
            }
        </div>
    </div>
</div>  

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}